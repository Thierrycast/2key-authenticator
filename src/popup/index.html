<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>2Key Authenticator</title>
    <script type="module" src="./ui/preloadTheme.js"></script>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <div class="janela">
      <h1 class="titulo">2Key Authenticator</h1>

      <div id="view-inicial" class="view" style="display: none;">
        <h2 class="titulo">Boas-vindas ğŸ‘‹</h2>
        <p class="texto-explica">
          Para proteger seus cÃ³digos 2FA, defina uma <strong>senha mestre</strong>.
          Ela serÃ¡ usada para criptografar suas chaves secretas e ninguÃ©m mais
          (nem a extensÃ£o) poderÃ¡ acessÃ¡-las sem ela.
        </p>

        <form id="form-senha-inicial" class="form-adicionar">
          <label>
            Definir senha mestre
            <input type="password" name="senha" required />
          </label>
          <button class="botao-salvar" type="submit">ComeÃ§ar</button>
          <p id="erro-senha-inicial" class="erro" style="min-height: 18px; color: #f87171;
            font-size: 13px; margin-top: 8px; opacity: 0; transition: opacity 0.2s ease;">
          </p>
        </form>
      </div>

      <div id="view-login" class="view" style="display: none;">
        <h2 class="titulo">Digite sua senha ğŸ”’</h2>
        <p class="texto-explica">
          Para acessar seus cÃ³digos 2FA, digite a senha mestre que vocÃª criou.
        </p>
        <form id="form-login" class="form-adicionar">
          <label>
            Senha mestre
            <input type="password" name="senha" required />
          </label>
          <button class="botao-salvar" type="submit">Desbloquear</button>
          <p id="erro-login" class="erro" style="display: none; color: #f87171; font-size: 13px;">Senha incorreta</p>
        </form>
        <p class="link-esqueci">
          <a href="#" id="esqueci-senha-link">Esqueci minha senha</a>
        </p>
      </div>

      <div id="view-redefinir" class="view" style="display: none;">
        <div class="container" style="padding: 24px; max-width: 400px; margin: 0 auto;">
          <h2 class="titulo">Redefinir Senha</h2>
          <p class="texto-explica" style="margin-bottom: 16px;">
            Por questÃµes de seguranÃ§a, <strong>nÃ£o Ã© possÃ­vel recuperar a senha mestre</strong> apÃ³s esquecÃª-la.<br><br>
            No entanto, vocÃª pode redefinir sua senha e comeÃ§ar do zero. Todos os cÃ³digos salvos serÃ£o apagados.
          </p>
          <button id="botao-redefinir" class="botao-deletar">Redefinir e comeÃ§ar do zero</button>
        </div>
      </div>

      <div class="view" id="view-lista">
        <button id="toggle-privacidade" class="botao-olho" title="Ocultar cÃ³digos">
          <img src="../../public/icons/eye-icon.svg" alt="Ãcone olho">
        </button>
        <div id="lista-codigos"></div>
        <button class="botao-add" id="abrir-formulario" title="Adicionar chave">+</button>
      </div>

      <div id="privacidade-overlay" class="overlay-privacidade">
        <p class="mensagem-privada">ğŸ‘€ Opa... <br>tem certeza que nÃ£o tem ninguÃ©m de olho?</p>
        <button id="toggle-visibilidade" class="botao-visibilidade" title="Exibir cÃ³digos">Exibir cÃ³digos</button>
      </div>

      <div class="view" id="view-adicionar" style="display: none">
        <form id="form-chave" class="form-adicionar">
          <label>
            Cole um link
            <input type="text" name="link" placeholder="otpauth://totp/Conta?secret=ABC123..." />
          </label>

          <label>
            Nome da conta
            <input type="text" name="nome" required />
          </label>

          <label>
            Chave secreta (base32)
            <input type="text" name="chave" required />
          </label>

          <div class="botoes-form">
            <button type="button" class="botao-cancelar" id="cancelar-form">Cancelar</button>
            <button type="submit" class="botao-salvar">Salvar</button>
          </div>
        </form>
      </div>
    </div>

    <button id="abrir-config" class="botao-config">âš™ï¸ ConfiguraÃ§Ãµes</button>
    <script type="module" src="./index.js"></script>

    <div id="modal-confirmar-reset" class="popup" style="display: none;">
      <div class="popup-conteudo">
        <h2>Redefinir tudo?</h2>
        <p style="margin-bottom: 16px;">
          Isso apagarÃ¡ todos os cÃ³digos salvos e vocÃª precisarÃ¡ criar uma nova senha mestre.
        </p>
        <div class="botoes">
          <button id="cancelar-reset" class="botao-cancelar">Cancelar</button>
          <button id="confirmar-reset" class="botao-deletar">Redefinir</button>
        </div>
      </div>
    </div>

  </body>
</html>
